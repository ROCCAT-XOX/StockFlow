{{ template "head" . }}
<body class="bg-gray-50 min-h-screen flex flex-col">
<!-- Navigation -->
{{ template "navigation" . }}

<!-- Main Content -->
<main class="container mx-auto px-4 py-6 flex-grow">
    <div class="mb-6 flex items-center justify-between">
        <div class="flex items-center">
            <a href="/employees" class="text-gray-500 hover:text-gray-700 mr-4">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                </svg>
            </a>
            <h1 class="text-2xl font-bold text-gray-900">{{.employee.FirstName}} {{.employee.LastName}}</h1>
        </div>
        <div>
            <a href="/employees/edit/{{.employee.ID.Hex}}" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" />
                </svg>
                Bearbeiten
            </a>
        </div>
    </div>

    <!-- Tab Navigation -->
    <div class="mb-6">
        <nav class="flex space-x-4" aria-label="Tabs">
            <button class="tab-btn px-3 py-2 text-sm font-medium rounded-md" data-tab="personal" onclick="showTab('personal')">
                Persönliche Daten
            </button>
            <button class="tab-btn px-3 py-2 text-sm font-medium rounded-md" data-tab="documents" onclick="showTab('documents')">
                Dokumente
            </button>
            <button class="tab-btn px-3 py-2 text-sm font-medium rounded-md" data-tab="training" onclick="showTab('training')">
                Weiterbildung
            </button>
            <button class="tab-btn px-3 py-2 text-sm font-medium rounded-md" data-tab="evaluation" onclick="showTab('evaluation')">
                Leistungsbeurteilungen
            </button>
            <button class="tab-btn px-3 py-2 text-sm font-medium rounded-md" data-tab="absence" onclick="showTab('absence')">
                Abwesenheiten
            </button>
            <button class="tab-btn px-3 py-2 text-sm font-medium rounded-md" data-tab="development" onclick="showTab('development')">
                Entwicklungsplan
            </button>
        </nav>
    </div>

    <!-- Tab Content -->
    <!-- 1. Persönliche Daten -->
    <div id="personal-tab" class="tab-content bg-white shadow overflow-hidden sm:rounded-lg">
        <div class="px-4 py-5 sm:px-6 flex items-center">
            <div class="flex-shrink-0 h-24 w-24 mr-6 relative group">
                {{if .employee.ProfileImage}}
                <img class="h-24 w-24 rounded-full object-cover" src="{{.employee.ProfileImage}}" alt="{{.employee.FirstName}} {{.employee.LastName}}">
                {{else}}
                <div class="h-24 w-24 rounded-full bg-green-100 flex items-center justify-center text-green-800 text-2xl font-semibold">
                    {{ getInitials (printf "%s %s" .employee.FirstName .employee.LastName) }}
                </div>
                {{end}}
                <button type="button" onclick="openModal('uploadProfileImageModal')" class="absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zm-2.207 2.207L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
                    </svg>
                </button>
            </div>
            <div>
                <h2 class="text-xl font-bold text-gray-900">{{.employee.FirstName}} {{.employee.LastName}}</h2>
                <p class="text-sm text-gray-500">{{.employee.Position}}</p>
                <p class="mt-1 max-w-2xl text-sm text-gray-500">{{.employee.Department}}</p>
                <div class="mt-2 flex items-center text-sm text-gray-500">
                    <svg class="flex-shrink-0 mr-1.5 h-5 w-5 text-green-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd" />
                    </svg>
                    Eingestellt am {{.employee.HireDate.Format "02.01.2006"}}
                </div>
            </div>
        </div>
        <div class="border-t border-gray-200">
            <dl>
                <!-- Persönliche Daten -->
                <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                    <dt class="text-sm font-medium text-gray-500">E-Mail</dt>
                    <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">{{.employee.Email}}</dd>
                </div>
                <div class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                    <dt class="text-sm font-medium text-gray-500">Telefon</dt>
                    <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">{{.employee.Phone}}</dd>
                </div>
                <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                    <dt class="text-sm font-medium text-gray-500">Adresse</dt>
                    <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">{{.employee.Address}}</dd>
                </div>
                <div class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                    <dt class="text-sm font-medium text-gray-500">Geburtsdatum</dt>
                    <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                        {{if not .employee.DateOfBirth.IsZero}}
                        {{.employee.DateOfBirth.Format "02.01.2006"}}
                        {{else}}
                        -
                        {{end}}
                    </dd>
                </div>

                <!-- Beschäftigungsdaten -->
                <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                    <dt class="text-sm font-medium text-gray-500">Position</dt>
                    <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">{{.employee.Position}}</dd>
                </div>
                <div class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                    <dt class="text-sm font-medium text-gray-500">Abteilung</dt>
                    <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">{{.employee.Department}}</dd>
                </div>
                <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                    <dt class="text-sm font-medium text-gray-500">Vorgesetzter</dt>
                    <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                        {{if .manager}}
                        <a href="/employees/view/{{.manager.ID.Hex}}" class="text-green-600 hover:text-green-800">
                            {{.manager.FirstName}} {{.manager.LastName}}
                        </a>
                        {{else}}
                        -
                        {{end}}
                    </dd>
                </div>
                <div class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                    <dt class="text-sm font-medium text-gray-500">Status</dt>
                    <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                        {{if eq .employee.Status "active"}}
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
                            Aktiv
                        </span>
                        {{else if eq .employee.Status "inactive"}}
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">
                            Inaktiv
                        </span>
                        {{else if eq .employee.Status "onleave"}}
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">
                            Im Urlaub
                        </span>
                        {{else if eq .employee.Status "remote"}}
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800">
                            Remote
                        </span>
                        {{end}}
                    </dd>
                </div>

                <!-- Finanzielle Daten (nur für Administratoren) -->
                {{if eq .userRole "admin"}}
                <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                    <dt class="text-sm font-medium text-gray-500">Gehalt</dt>
                    <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">{{.employee.Salary}} €</dd>
                </div>
                <div class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                    <dt class="text-sm font-medium text-gray-500">Bankverbindung</dt>
                    <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">{{.employee.BankAccount}}</dd>
                </div>
                <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                    <dt class="text-sm font-medium text-gray-500">Steuerklasse</dt>
                    <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">{{.employee.TaxID}}</dd>
                </div>
                <div class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                    <dt class="text-sm font-medium text-gray-500">Sozialversicherungsnummer</dt>
                    <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">{{.employee.SocialSecID}}</dd>
                </div>
                <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                    <dt class="text-sm font-medium text-gray-500">Krankenkasse</dt>
                    <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">{{if .employee.HealthInsurance}}{{.employee.HealthInsurance}}{{else}}-{{end}}</dd>
                </div>
                {{end}}

                <!-- Notfallkontakt -->
                <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                    <dt class="text-sm font-medium text-gray-500">Notfallkontakt</dt>
                    <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                        {{if .employee.EmergencyName}}
                        {{.employee.EmergencyName}}<br>
                        {{.employee.EmergencyPhone}}
                        {{else}}
                        -
                        {{end}}
                    </dd>
                </div>

                <!-- Notizen -->
                <div class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                    <dt class="text-sm font-medium text-gray-500">Notizen</dt>
                    <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                        {{if .employee.Notes}}
                        {{.employee.Notes}}
                        {{else}}
                        -
                        {{end}}
                    </dd>
                </div>
            </dl>
        </div>
    </div>

    <!-- 2. Dokumente -->
    <div id="documents-tab" class="tab-content hidden">
        <div class="bg-white shadow overflow-hidden sm:rounded-lg">
            <div class="px-4 py-5 sm:px-6 flex justify-between items-center">
                <h2 class="text-lg font-medium text-gray-900">Dokumente</h2>
                <button type="button" onclick="openModal('uploadDocumentModal')" class="inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                    </svg>
                    Dokument hochladen
                </button>
            </div>

            <div class="px-4 py-2 border-t border-gray-200">
                <h3 class="text-md font-medium text-gray-700 mb-3">Bewerbungs- und Einstellungsunterlagen</h3>
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                        <tr>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Dateiname</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Beschreibung</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Hochgeladen am</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Typ</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Größe</th>
                            <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Aktionen</th>
                        </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                        {{range .employee.ApplicationDocuments}}
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{{.Name}}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{.Description}}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{.UploadDate.Format "02.01.2006 15:04"}}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{.FileType}}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{formatFileSize .FileSize}}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                <a href="/employees/{{$.employee.ID.Hex}}/documents/{{.ID.Hex}}/download?category=application" class="text-green-600 hover:text-green-900 mr-3">Herunterladen</a>
                                <a href="#" onclick="confirmDeleteDocument('{{$.employee.ID.Hex}}', '{{.ID.Hex}}', 'application')" class="text-red-600 hover:text-red-900">Löschen</a>
                            </td>
                        </tr>
                        {{else}}
                        <tr>
                            <td colspan="6" class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center">Keine Dokumente vorhanden</td>
                        </tr>
                        {{end}}
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="px-4 py-2 border-t border-gray-200">
                <h3 class="text-md font-medium text-gray-700 mb-3">Allgemeine Dokumente</h3>
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                        <tr>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Dateiname</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Beschreibung</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Hochgeladen am</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Typ</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Größe</th>
                            <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Aktionen</th>
                        </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                        {{range .employee.Documents}}
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{{.Name}}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{.Description}}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{.UploadDate.Format "02.01.2006 15:04"}}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{.FileType}}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{formatFileSize .FileSize}}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                <a href="/employees/{{$.employee.ID.Hex}}/documents/{{.ID.Hex}}/download?category=general" class="text-green-600 hover:text-green-900 mr-3">Herunterladen</a>
                                <a href="#" onclick="confirmDeleteDocument('{{$.employee.ID.Hex}}', '{{.ID.Hex}}', 'general')" class="text-red-600 hover:text-red-900">Löschen</a>
                            </td>
                        </tr>
                        {{else}}
                        <tr>
                            <td colspan="6" class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center">Keine Dokumente vorhanden</td>
                        </tr>
                        {{end}}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- 3. Weiterbildung -->
    <div id="training-tab" class="tab-content hidden">
        <div class="bg-white shadow overflow-hidden sm:rounded-lg">
            <div class="px-4 py-5 sm:px-6 flex justify-between items-center">
                <h2 class="text-lg font-medium text-gray-900">Weiterbildung und Zertifizierungen</h2>
                <button type="button" onclick="openModal('addTrainingModal')" class="inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd" />
                    </svg>
                    Weiterbildung hinzufügen
                </button>
            </div>

            <div class="px-4 py-5 sm:px-6 divide-y divide-gray-200">
                {{range .employee.Trainings}}
                <div class="py-4 space-y-4">
                    <div class="flex justify-between">
                        <div>
                            <h3 class="text-md font-medium text-gray-900">{{.Title}}</h3>
                            <p class="text-sm text-gray-500">{{.Description}}</p>
                        </div>
                        <div class="flex items-start space-x-2">
                            <button type="button" onclick="openTrainingDocumentUpload('{{.ID.Hex}}')" class="text-sm text-green-600 hover:text-green-900">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                                </svg>
                            </button>
                            <button type="button" onclick="confirmDeleteTraining('{{$.employee.ID.Hex}}', '{{.ID.Hex}}')" class="text-sm text-red-600 hover:text-red-900">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
                                </svg>
                            </button>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 text-sm">
                        <div>
                            <span class="block text-gray-500">Anbieter</span>
                            <span class="block font-medium text-gray-900">{{.Provider}}</span>
                        </div>
                        <div>
                            <span class="block text-gray-500">Zeitraum</span>
                            <span class="block font-medium text-gray-900">
                                {{.StartDate.Format "02.01.2006"}} -
                                {{if not .EndDate.IsZero}}{{.EndDate.Format "02.01.2006"}}{{else}}aktuell{{end}}
                            </span>
                        </div>
                        <div>
                            <span class="block text-gray-500">Zertifikat</span>
                            <span class="block font-medium text-gray-900">{{if .Certificate}}{{.Certificate}}{{else}}-{{end}}</span>
                        </div>
                        <div>
                            <span class="block text-gray-500">Status</span>
                            <span class="block font-medium text-gray-900">
                                {{if eq .Status "planned"}}
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800">Geplant</span>
                                {{else if eq .Status "ongoing"}}
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">Laufend</span>
                                {{else if eq .Status "completed"}}
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Abgeschlossen</span>
                                {{else}}
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800">{{.Status}}</span>
                                {{end}}
                            </span>
                        </div>
                    </div>
                    {{if .Notes}}
                    <div class="mt-2">
                        <span class="block text-gray-500 text-sm">Notizen</span>
                        <p class="text-sm text-gray-900">{{.Notes}}</p>
                    </div>
                    {{end}}

                    {{if .Documents}}
                    <div class="mt-2">
                        <span class="block text-gray-500 text-sm mb-2">Dokumente</span>
                        <ul class="divide-y divide-gray-200">
                            {{range .Documents}}
                            <li class="py-2 flex justify-between">
                                <div class="flex items-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400 mr-2" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd" />
                                    </svg>
                                    <span class="text-sm text-gray-900">{{.Name}}</span>
                                </div>
                                <div class="flex space-x-2">
                                    <a href="/employees/{{$.employee.ID.Hex}}/documents/{{.ID.Hex}}/download?category=training&relatedId={{$.ID.Hex}}" class="text-green-600 hover:text-green-900">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" />
                                        </svg>
                                    </a>
                                    <button onclick="confirmDeleteDocument('{{$.employee.ID.Hex}}', '{{.ID.Hex}}', 'training', '{{$.ID.Hex}}')" class="text-red-600 hover:text-red-900">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
                                        </svg>
                                    </button>
                                </div>
                            </li>
                            {{end}}
                        </ul>
                    </div>
                    {{end}}
                </div>
                {{else}}
                <div class="py-4 text-center text-gray-500">
                    Keine Weiterbildungen vorhanden
                </div>
                {{end}}
            </div>
        </div>
    </div>

    <!-- 4. Leistungsbeurteilungen -->
    <div id="evaluation-tab" class="tab-content hidden">
        <div class="bg-white shadow overflow-hidden sm:rounded-lg">
            <div class="px-4 py-5 sm:px-6 flex justify-between items-center">
                <h2 class="text-lg font-medium text-gray-900">Leistungsbeurteilungen</h2>
                <button type="button" onclick="openModal('addEvaluationModal')" class="inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd" />
                    </svg>
                    Beurteilung hinzufügen
                </button>
            </div>

            <div class="px-4 py-5 sm:px-6 divide-y divide-gray-200">
                {{range .employee.Evaluations}}
                <div class="py-4 space-y-4">
                    <div class="flex justify-between">
                        <div>
                            <h3 class="text-md font-medium text-gray-900">{{.Title}}</h3>
                            <p class="text-sm text-gray-500">Erstellt von {{.EvaluatorName}} am {{.Date.Format "02.01.2006"}}</p>
                        </div>
                        <div class="flex items-start space-x-2">
                            <button type="button" onclick="openEvaluationDocumentUpload('{{.ID.Hex}}')" class="text-sm text-green-600 hover:text-green-900">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                                </svg>
                            </button>
                            <button type="button" onclick="confirmDeleteEvaluation('{{$.employee.ID.Hex}}', '{{.ID.Hex}}')" class="text-sm text-red-600 hover:text-red-900">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
                                </svg>
                            </button>
                        </div>
                    </div>

                    <div class="flex items-center space-x-1 text-sm">
                        <span class="text-gray-500">Gesamtbewertung:</span>
                        {{ $rating := .OverallRating }}

                        <div class="flex text-yellow-400">
                            {{range $i := iterate 5}}
                            {{if lt $i $rating}}
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118l-2.8-2.034c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                            </svg>
                            {{else}}
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
                            </svg>
                            {{end}}
                            {{end}}
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <span class="block text-gray-500 text-sm">Stärken</span>
                            <p class="text-sm text-gray-900">{{.Strengths}}</p>
                        </div>
                        <div>
                            <span class="block text-gray-500 text-sm">Verbesserungsbedarf</span>
                            <p class="text-sm text-gray-900">{{.AreasToImprove}}</p>
                        </div>
                    </div>

                    {{if .Comments}}
                    <div>
                        <span class="block text-gray-500 text-sm">Kommentar des Vorgesetzten</span>
                        <p class="text-sm text-gray-900">{{.Comments}}</p>
                    </div>
                    {{end}}

                    {{if .EmployeeComments}}
                    <div>
                        <span class="block text-gray-500 text-sm">Kommentar des Mitarbeiters</span>
                        <p class="text-sm text-gray-900">{{.EmployeeComments}}</p>
                    </div>
                    {{end}}

                    {{if .Documents}}
                    <div class="mt-2">
                        <span class="block text-gray-500 text-sm mb-2">Dokumente</span>
                        <ul class="divide-y divide-gray-200">
                            {{range .Documents}}
                            <li class="py-2 flex justify-between">
                                <div class="flex items-center">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400 mr-2" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd" />
                                    </svg>
                                    <span class="text-sm text-gray-900">{{.Name}}</span>
                                </div>
                                <div class="flex space-x-2">
                                    <a href="/employees/{{$.employee.ID.Hex}}/documents/{{.ID.Hex}}/download?category=evaluation&relatedId={{$.ID.Hex}}" class="text-green-600 hover:text-green-900">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" />
                                        </svg>
                                    </a>
                                    <button onclick="confirmDeleteDocument('{{$.employee.ID.Hex}}', '{{.ID.Hex}}', 'evaluation', '{{$.ID.Hex}}')" class="text-red-600 hover:text-red-900">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
                                        </svg>
                                    </button>
                                </div>
                            </li>
                            {{end}}
                        </ul>
                    </div>
                    {{end}}
                </div>
                {{else}}
                <div class="py-4 text-center text-gray-500">
                    Keine Leistungsbeurteilungen vorhanden
                </div>
                {{end}}
            </div>
        </div>
    </div>
    <!-- 5. Abwesenheiten -->
    <div id="absence-tab" class="tab-content hidden">
        <div class="bg-white shadow overflow-hidden sm:rounded-lg">
            <div class="px-4 py-5 sm:px-6 flex justify-between items-center">
                <div>
                    <h2 class="text-lg font-medium text-gray-900">Abwesenheiten</h2>
                    <p class="mt-1 max-w-2xl text-sm text-gray-500">
                        Urlaubsanspruch: {{.employee.VacationDays}} Tage | Verbleibend: {{.employee.RemainingVacation}} Tage
                    </p>
                </div>
                <button type="button" onclick="openModal('addAbsenceModal')" class="inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd" />
                    </svg>
                    Abwesenheit erfassen
                </button>
            </div>

            <div class="px-4 py-5 sm:px-6">
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                        <tr>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Art</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Von</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Bis</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tage</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Grund</th>
                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Genehmigt von</th>
                            <th scope="col" class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Aktionen</th>
                        </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                        {{range .employee.Absences}}
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                                {{if eq .Type "vacation"}}
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Urlaub</span>
                                {{else if eq .Type "sick"}}
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">Krankheit</span>
                                {{else if eq .Type "special"}}
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800">Sonderurlaub</span>
                                {{else}}
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800">{{.Type}}</span>
                                {{end}}
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                {{.StartDate.Format "02.01.2006"}}
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                {{.EndDate.Format "02.01.2006"}}
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                {{.Days}}
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                {{if eq .Status "requested"}}
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">Beantragt</span>
                                {{else if eq .Status "approved"}}
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Genehmigt</span>
                                {{else if eq .Status "rejected"}}
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">Abgelehnt</span>
                                {{else if eq .Status "cancelled"}}
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800">Storniert</span>
                                {{else}}
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800">{{.Status}}</span>
                                {{end}}
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                {{.Reason}}
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                {{if .ApproverName}}{{.ApproverName}}{{else}}-{{end}}
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                <div class="flex justify-end space-x-2">
                                    {{if eq .Status "requested"}}
                                    {{if or (eq $.userRole "admin") (eq $.userRole "hr") (eq $.userRole "manager")}}
                                    <button onclick="approveAbsence('{{$.employee.ID.Hex}}', '{{.ID.Hex}}', 'approve')" class="text-green-600 hover:text-green-900">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                                        </svg>
                                    </button>
                                    <button onclick="approveAbsence('{{$.employee.ID.Hex}}', '{{.ID.Hex}}', 'reject')"
                                            class="text-red-600 hover:text-red-900">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20"
                                             fill="currentColor">
                                            <path fill-rule="evenodd"
                                                  d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                                                  clip-rule="evenodd"/>
                                        </svg>
                                    </button>
                                    {{end}}
                                    {{end}}

                                    {{if .Documents}}
                                    <button onclick="openAbsenceDocumentsModal('{{.ID.Hex}}')"
                                            class="text-blue-600 hover:text-blue-900">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20"
                                             fill="currentColor">
                                            <path fill-rule="evenodd"
                                                  d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z"
                                                  clip-rule="evenodd"/>
                                        </svg>
                                    </button>
                                    {{else}}
                                    <button onclick="openAbsenceDocumentUpload('{{.ID.Hex}}')"
                                            class="text-green-600 hover:text-green-900">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20"
                                             fill="currentColor">
                                            <path fill-rule="evenodd"
                                                  d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z"
                                                  clip-rule="evenodd"/>
                                        </svg>
                                    </button>
                                    {{end}}

                                    <button onclick="confirmDeleteAbsence('{{$.employee.ID.Hex}}', '{{.ID.Hex}}')"
                                            class="text-red-600 hover:text-red-900">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20"
                                             fill="currentColor">
                                            <path fill-rule="evenodd"
                                                  d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z"
                                                  clip-rule="evenodd"/>
                                        </svg>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        {{else}}
                        <tr>
                            <td colspan="8" class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center">Keine
                                Abwesenheiten vorhanden
                            </td>
                        </tr>
                        {{end}}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- 6. Entwicklungsplan -->
    <div id="development-tab" class="tab-content hidden">
        <div class="bg-white shadow overflow-hidden sm:rounded-lg">
            <div class="px-4 py-5 sm:px-6 flex justify-between items-center">
                <h2 class="text-lg font-medium text-gray-900">Entwicklungsplan</h2>
                <button type="button" onclick="openModal('addDevelopmentItemModal')"
                        class="inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20"
                         fill="currentColor">
                        <path fill-rule="evenodd"
                              d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z"
                              clip-rule="evenodd"/>
                    </svg>
                    Entwicklungsziel hinzufügen
                </button>
            </div>

            <div class="px-4 py-5 sm:px-6">
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                        <tr>
                            <th scope="col"
                                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                Titel
                            </th>
                            <th scope="col"
                                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                Beschreibung
                            </th>
                            <th scope="col"
                                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                Typ
                            </th>
                            <th scope="col"
                                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                Zieldatum
                            </th>
                            <th scope="col"
                                class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                Status
                            </th>
                            <th scope="col"
                                class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
                                Aktionen
                            </th>
                        </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200">
                        {{range .employee.DevelopmentPlan}}
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{{.Title}}</td>
                            <td class="px-6 py-4 text-sm text-gray-500">{{.Description}}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                {{if eq .Type "skill"}}
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800">Fähigkeit</span>
                                {{else if eq .Type "knowledge"}}
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-purple-100 text-purple-800">Wissen</span>
                                {{else if eq .Type "certification"}}
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Zertifizierung</span>
                                {{else}}
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800">{{.Type}}</span>
                                {{end}}
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                {{if not .TargetDate.IsZero}}
                                {{.TargetDate.Format "02.01.2006"}}
                                {{else}}
                                -
                                {{end}}
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                {{if eq .Status "not started"}}
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800">Nicht begonnen</span>
                                {{else if eq .Status "in progress"}}
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">In Bearbeitung</span>
                                {{else if eq .Status "completed"}}
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Abgeschlossen</span>
                                {{else}}
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800">{{.Status}}</span>
                                {{end}}
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                <div class="flex justify-end space-x-2">
                                    <button onclick="confirmDeleteDevelopmentItem('{{$.employee.ID.Hex}}', '{{.ID.Hex}}')"
                                            class="text-red-600 hover:text-red-900">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20"
                                             fill="currentColor">
                                            <path fill-rule="evenodd"
                                                  d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z"
                                                  clip-rule="evenodd"/>
                                        </svg>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        {{else}}
                        <tr>
                            <td colspan="6" class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center">Keine
                                Entwicklungsziele vorhanden
                            </td>
                        </tr>
                        {{end}}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>



    <!-- Modals -->
    <!-- 1. Document Upload Modal -->
    <div id="uploadDocumentModal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75" aria-hidden="true"></div>
            <div class="relative bg-white rounded-lg max-w-md w-full mx-auto shadow-xl">
                <div class="flex justify-between items-center px-6 py-4 border-b">
                    <h3 class="text-lg font-medium text-gray-900">Dokument hochladen</h3>
                    <button type="button" onclick="closeModal('uploadDocumentModal')"
                            class="text-gray-400 hover:text-gray-500">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M6 18L18 6M6 6l12 12"/>
                        </svg>
                    </button>
                </div>
                <form id="uploadDocumentForm" action="/employees/{{.employee.ID.Hex}}/documents" method="POST"
                      enctype="multipart/form-data" class="px-6 py-4">
                    <div class="space-y-4">
                        <div>
                            <label for="docName" class="block text-sm font-medium text-gray-700">Dokumentname</label>
                            <input type="text" name="name" id="docName" required
                                   class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
                        </div>
                        <div>
                            <label for="docDescription"
                                   class="block text-sm font-medium text-gray-700">Beschreibung</label>
                            <textarea name="description" id="docDescription" rows="2"
                                      class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500"></textarea>
                        </div>
                        <div>
                            <label for="docCategory" class="block text-sm font-medium text-gray-700">Kategorie</label>
                            <select name="category" id="docCategory" required
                                    class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
                                <option value="general">Allgemein</option>
                                <option value="application">Bewerbung & Einstellung</option>
                            </select>
                        </div>
                        <div>
                            <label for="docFile" class="block text-sm font-medium text-gray-700">Datei</label>
                            <input type="file" name="file" id="docFile" required class="mt-1 block w-full text-sm text-gray-500
                                file:mr-4 file:py-2 file:px-4
                                file:rounded-md file:border-0
                                file:text-sm file:font-medium
                                file:bg-green-50 file:text-green-700
                                hover:file:bg-green-100
                            ">
                        </div>
                        <input type="hidden" name="relatedId" id="docRelatedId" value="">
                    </div>
                    <div class="mt-5 flex justify-end">
                        <button type="button" onclick="closeModal('uploadDocumentModal')"
                                class="mr-3 inline-flex justify-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                            Abbrechen
                        </button>
                        <button type="submit"
                                class="inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                            Hochladen
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- 2. Add Training Modal -->
    <div id="addTrainingModal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75" aria-hidden="true"></div>
            <div class="relative bg-white rounded-lg max-w-lg w-full mx-auto shadow-xl">
                <div class="flex justify-between items-center px-6 py-4 border-b">
                    <h3 class="text-lg font-medium text-gray-900">Weiterbildung hinzufügen</h3>
                    <button type="button" onclick="closeModal('addTrainingModal')" class="text-gray-400 hover:text-gray-500">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
                <form id="addTrainingForm" action="/employees/{{.employee.ID.Hex}}/trainings" method="POST" class="px-6 py-4">
                    <div class="space-y-4">
                        <div>
                            <label for="trainingTitle" class="block text-sm font-medium text-gray-700">Titel</label>
                            <input type="text" name="title" id="trainingTitle" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
                        </div>
                        <div>
                            <label for="trainingDescription" class="block text-sm font-medium text-gray-700">Beschreibung</label>
                            <textarea name="description" id="trainingDescription" rows="3" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500"></textarea>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label for="trainingProvider" class="block text-sm font-medium text-gray-700">Anbieter</label>
                                <input type="text" name="provider" id="trainingProvider" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
                            </div>
                            <div>
                                <label for="trainingCertificate" class="block text-sm font-medium text-gray-700">Zertifikat</label>
                                <input type="text" name="certificate" id="trainingCertificate" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label for="trainingStartDate" class="block text-sm font-medium text-gray-700">Startdatum</label>
                                <input type="date" name="startDate" id="trainingStartDate" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
                            </div>
                            <div>
                                <label for="trainingEndDate" class="block text-sm font-medium text-gray-700">Enddatum</label>
                                <input type="date" name="endDate" id="trainingEndDate" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
                            </div>
                        </div>
                        <div>
                            <label for="trainingStatus" class="block text-sm font-medium text-gray-700">Status</label>
                            <select name="status" id="trainingStatus" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
                                <option value="planned">Geplant</option>
                                <option value="ongoing">Laufend</option>
                                <option value="completed">Abgeschlossen</option>
                            </select>
                        </div>
                        <div>
                            <label for="trainingNotes" class="block text-sm font-medium text-gray-700">Notizen</label>
                            <textarea name="notes" id="trainingNotes" rows="2" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500"></textarea>
                        </div>
                    </div>
                    <div class="mt-5 flex justify-end">
                        <button type="button" onclick="closeModal('addTrainingModal')" class="mr-3 inline-flex justify-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                            Abbrechen
                        </button>
                        <button type="submit" class="inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                            Hinzufügen
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- 3. Add Evaluation Modal -->
    <div id="addEvaluationModal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75" aria-hidden="true"></div>
            <div class="relative bg-white rounded-lg max-w-lg w-full mx-auto shadow-xl">
                <div class="flex justify-between items-center px-6 py-4 border-b">
                    <h3 class="text-lg font-medium text-gray-900">Leistungsbeurteilung hinzufügen</h3>
                    <button type="button" onclick="closeModal('addEvaluationModal')" class="text-gray-400 hover:text-gray-500">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
                <form id="addEvaluationForm" action="/employees/{{.employee.ID.Hex}}/evaluations" method="POST" class="px-6 py-4">
                    <div class="space-y-4">
                        <div>
                            <label for="evalTitle" class="block text-sm font-medium text-gray-700">Titel</label>
                            <input type="text" name="title" id="evalTitle" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
                        </div>
                        <div>
                            <label for="evalDate" class="block text-sm font-medium text-gray-700">Datum</label>
                            <input type="date" name="date" id="evalDate" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500" value="{{now.Format "2006-01-02"}}">
                        </div>
                        <div>
                            <label for="evalRating" class="block text-sm font-medium text-gray-700">Gesamtbewertung</label>
                            <select name="overallRating" id="evalRating" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
                                <option value="1">1 - Erheblicher Verbesserungsbedarf</option>
                                <option value="2">2 - Teilweise erfüllt die Erwartungen</option>
                                <option value="3" selected>3 - Erfüllt die Erwartungen</option>
                                <option value="4">4 - Übertrifft die Erwartungen</option>
                                <option value="5">5 - Herausragende Leistung</option>
                            </select>
                        </div>
                        <div>
                            <label for="evalStrengths" class="block text-sm font-medium text-gray-700">Stärken</label>
                            <textarea name="strengths" id="evalStrengths" rows="3" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500"></textarea>
                        </div>
                        <div>
                            <label for="evalAreasToImprove" class="block text-sm font-medium text-gray-700">Verbesserungsbedarf</label>
                            <textarea name="areasToImprove" id="evalAreasToImprove" rows="3" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500"></textarea>
                        </div>
                        <div>
                            <label for="evalComments" class="block text-sm font-medium text-gray-700">Kommentar</label>
                            <textarea name="comments" id="evalComments" rows="3" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500"></textarea>
                        </div>
                    </div>
                    <div class="mt-5 flex justify-end">
                        <button type="button" onclick="closeModal('addEvaluationModal')" class="mr-3 inline-flex justify-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                            Abbrechen
                        </button>
                        <button type="submit" class="inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                            Hinzufügen
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- 4. Add Absence Modal -->
    <div id="addAbsenceModal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75" aria-hidden="true"></div>
            <div class="relative bg-white rounded-lg max-w-lg w-full mx-auto shadow-xl">
                <div class="flex justify-between items-center px-6 py-4 border-b">
                    <h3 class="text-lg font-medium text-gray-900">Abwesenheit erfassen</h3>
                    <button type="button" onclick="closeModal('addAbsenceModal')" class="text-gray-400 hover:text-gray-500">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
                <form id="addAbsenceForm" action="/employees/{{.employee.ID.Hex}}/absences" method="POST" class="px-6 py-4">
                    <div class="space-y-4">
                        <div>
                            <label for="absenceType" class="block text-sm font-medium text-gray-700">Art</label>
                            <select name="type" id="absenceType" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
                                <option value="vacation">Urlaub</option>
                                <option value="sick">Krankheit</option>
                                <option value="special">Sonderurlaub</option>
                            </select>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label for="absenceStartDate" class="block text-sm font-medium text-gray-700">Von</label>
                                <input type="date" name="startDate" id="absenceStartDate" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500" value="{{now.Format "2006-01-02"}}">
                            </div>
                            <div>
                                <label for="absenceEndDate" class="block text-sm font-medium text-gray-700">Bis</label>
                                <input type="date" name="endDate" id="absenceEndDate" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500" value="{{now.Format "2006-01-02"}}">
                            </div>
                        </div>
                        <div>
                            <label for="absenceReason" class="block text-sm font-medium text-gray-700">Grund</label>
                            <input type="text" name="reason" id="absenceReason" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
                        </div>
                        <div>
                            <label for="absenceNotes" class="block text-sm font-medium text-gray-700">Notizen</label>
                            <textarea name="notes" id="absenceNotes" rows="2" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500"></textarea>
                        </div>
                    </div>
                    <div class="mt-5 flex justify-end">
                        <button type="button" onclick="closeModal('addAbsenceModal')" class="mr-3 inline-flex justify-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                            Abbrechen
                        </button>
                        <button type="submit" class="inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                            Hinzufügen
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- 5. Add Development Item Modal -->
    <div id="addDevelopmentItemModal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75" aria-hidden="true"></div>
            <div class="relative bg-white rounded-lg max-w-lg w-full mx-auto shadow-xl">
                <div class="flex justify-between items-center px-6 py-4 border-b">
                    <h3 class="text-lg font-medium text-gray-900">Entwicklungsziel hinzufügen</h3>
                    <button type="button" onclick="closeModal('addDevelopmentItemModal')" class="text-gray-400 hover:text-gray-500">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
                <form id="addDevelopmentItemForm" action="/employees/{{.employee.ID.Hex}}/development" method="POST" class="px-6 py-4">
                    <div class="space-y-4">
                        <div>
                            <label for="devItemTitle" class="block text-sm font-medium text-gray-700">Titel</label>
                            <input type="text" name="title" id="devItemTitle" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
                        </div>
                        <div>
                            <label for="devItemDescription" class="block text-sm font-medium text-gray-700">Beschreibung</label>
                            <textarea name="description" id="devItemDescription" rows="3" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500"></textarea>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label for="devItemType" class="block text-sm font-medium text-gray-700">Typ</label>
                                <select name="type" id="devItemType" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
                                    <option value="skill">Fähigkeit</option>
                                    <option value="knowledge">Wissen</option>
                                    <option value="certification">Zertifizierung</option>
                                </select>
                            </div>
                            <div>
                                <label for="devItemTargetDate" class="block text-sm font-medium text-gray-700">Zieldatum</label>
                                <input type="date" name="targetDate" id="devItemTargetDate" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
                            </div>
                        </div>
                        <div>
                            <label for="devItemStatus" class="block text-sm font-medium text-gray-700">Status</label>
                            <select name="status" id="devItemStatus" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500">
                                <option value="not started">Nicht begonnen</option>
                                <option value="in progress">In Bearbeitung</option>
                                <option value="completed">Abgeschlossen</option>
                            </select>
                        </div>
                        <div>
                            <label for="devItemNotes" class="block text-sm font-medium text-gray-700">Notizen</label>
                            <textarea name="notes" id="devItemNotes" rows="2" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500"></textarea>
                        </div>
                    </div>
                    <div class="mt-5 flex justify-end">
                        <button type="button" onclick="closeModal('addDevelopmentItemModal')" class="mr-3 inline-flex justify-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                            Abbrechen
                        </button>
                        <button type="submit" class="inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                            Hinzufügen
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- 6. Confirmation Modal -->
    <div id="confirmationModal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75" aria-hidden="true"></div>
            <div class="relative bg-white rounded-lg max-w-md w-full mx-auto shadow-xl">
                <div class="px-6 py-4">
                    <div class="text-center">
                        <svg class="h-12 w-12 text-red-500 mx-auto mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                        </svg>
                        <h3 id="confirmationTitle" class="text-lg font-medium text-gray-900 mb-2">Bestätigung</h3>
                        <p id="confirmationMessage" class="text-sm text-gray-500">Sind Sie sicher, dass Sie diese Aktion durchführen möchten?</p>
                    </div>
                </div>
                <div class="px-6 py-3 bg-gray-50 flex justify-end space-x-3 rounded-b-lg">
                    <button type="button" onclick="closeModal('confirmationModal')" class="inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                        Abbrechen
                    </button>
                    <button id="confirmActionBtn" type="button" class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                        Bestätigen
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Profilbild-Upload Modal -->
    <div id="uploadProfileImageModal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75" aria-hidden="true"></div>
            <div class="relative bg-white rounded-lg max-w-md w-full mx-auto shadow-xl">
                <div class="flex justify-between items-center px-6 py-4 border-b">
                    <h3 class="text-lg font-medium text-gray-900">Profilbild hochladen</h3>
                    <button type="button" onclick="closeModal('uploadProfileImageModal')" class="text-gray-400 hover:text-gray-500">
                        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
                <form id="uploadProfileImageForm" action="/employees/{{.employee.ID.Hex}}/profile-image" method="POST" enctype="multipart/form-data" class="px-6 py-4">
                    <div class="space-y-4">
                        <div class="text-center mb-4">
                            <div class="mb-4">
                                {{if .employee.ProfileImage}}
                                <img id="profileImagePreview" src="{{.employee.ProfileImage}}" alt="{{.employee.FirstName}} {{.employee.LastName}}" class="h-32 w-32 rounded-full mx-auto object-cover">
                                {{else}}
                                <div id="profileImagePreview" class="h-32 w-32 rounded-full bg-green-100 flex items-center justify-center text-green-800 text-3xl font-semibold mx-auto">
                                    {{slice .employee.FirstName 0 1}}{{slice .employee.LastName 0 1}}
                                </div>
                                {{end}}
                            </div>
                        </div>
                        <div>
                            <label for="profileImage" class="block text-sm font-medium text-gray-700">Profilbild auswählen</label>
                            <input type="file" name="profileImage" id="profileImage" accept="image/*" required class="mt-1 block w-full text-sm text-gray-500
                            file:mr-4 file:py-2 file:px-4
                            file:rounded-md file:border-0
                            file:text-sm file:font-medium
                            file:bg-green-50 file:text-green-700
                            hover:file:bg-green-100
                        " onchange="previewImage(this)">
                            <p class="mt-1 text-sm text-gray-500">JPG, PNG oder GIF. Maximal 2MB.</p>
                        </div>
                    </div>
                    <div class="mt-5 flex justify-end">
                        <button type="button" onclick="closeModal('uploadProfileImageModal')" class="mr-3 inline-flex justify-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                            Abbrechen
                        </button>
                        <button type="submit" class="inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500">
                            Hochladen
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</main>

<!-- Footer -->
{{ template "footer" . }}

<script>
    // Fügen Sie diese Funktion dem bestehenden JavaScript in employee_detail_advanced.html hinzu
    function previewImage(input) {
        const preview = document.getElementById('profileImagePreview');

        if (input.files && input.files[0]) {
            const reader = new FileReader();

            reader.onload = function(e) {
                if (preview.tagName.toLowerCase() === 'img') {
                    preview.src = e.target.result;
                } else {
                    // Wenn es ein DIV ist (Standard-Avatar), ersetzen wir es durch ein Image
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    img.className = 'h-32 w-32 rounded-full mx-auto object-cover';
                    img.id = 'profileImagePreview';
                    preview.parentNode.replaceChild(img, preview);
                }
            }

            reader.readAsDataURL(input.files[0]);
        }
    }

    // Formularsubmit für Profilbild-Upload
    document.addEventListener('DOMContentLoaded', function() {
        const uploadProfileImageForm = document.getElementById('uploadProfileImageForm');
        if (uploadProfileImageForm) {
            uploadProfileImageForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(this);

                fetch(this.action, {
                    method: 'POST',
                    body: formData
                })
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('Fehler beim Hochladen des Profilbilds');
                        }
                        return response.json();
                    })
                    .then(data => {
                        closeModal('uploadProfileImageModal');
                        // Seite neu laden, um das aktualisierte Profilbild anzuzeigen
                        window.location.reload();
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        alert('Ein Fehler ist aufgetreten: ' + error.message);
                    });
            });
        }
    });

    // Modal functions
    function openModal(id) {
        document.getElementById(id).classList.remove('hidden');
        document.body.classList.add('overflow-hidden');
    }

    function closeModal(id) {
        document.getElementById(id).classList.add('hidden');
        document.body.classList.remove('overflow-hidden');
    }

    // Document upload for training
    function openTrainingDocumentUpload(trainingId) {
        const docCategory = document.getElementById('docCategory');
        const docRelatedId = document.getElementById('docRelatedId');

        // Set the category and related ID
        if (docCategory) docCategory.value = 'training';
        if (docRelatedId) docRelatedId.value = trainingId;

        // Open the modal
        openModal('uploadDocumentModal');
    }

    // Document upload for evaluation
    function openEvaluationDocumentUpload(evaluationId) {
        const docCategory = document.getElementById('docCategory');
        const docRelatedId = document.getElementById('docRelatedId');

        // Set the category and related ID
        if (docCategory) docCategory.value = 'evaluation';
        if (docRelatedId) docRelatedId.value = evaluationId;

        // Open the modal
        openModal('uploadDocumentModal');
    }

    // Document upload for absence
    function openAbsenceDocumentUpload(absenceId) {
        const docCategory = document.getElementById('docCategory');
        const docRelatedId = document.getElementById('docRelatedId');

        // Set the category and related ID
        if (docCategory) docCategory.value = 'absence';
        if (docRelatedId) docRelatedId.value = absenceId;

        // Open the modal
        openModal('uploadDocumentModal');
    }

    // Document deletion confirmation
    function confirmDeleteDocument(employeeId, documentId, category, relatedId = '') {
        const title = document.getElementById('confirmationTitle');
        const message = document.getElementById('confirmationMessage');
        const confirmBtn = document.getElementById('confirmActionBtn');

        if (title) title.textContent = 'Dokument löschen';
        if (message) message.textContent = 'Sind Sie sicher, dass Sie dieses Dokument löschen möchten? Diese Aktion kann nicht rückgängig gemacht werden.';

        if (confirmBtn) {
            confirmBtn.onclick = function() {
                deleteDocument(employeeId, documentId, category, relatedId);
            };
        }

        openModal('confirmationModal');
    }

    // Training deletion confirmation
    function confirmDeleteTraining(employeeId, trainingId) {
        const title = document.getElementById('confirmationTitle');
        const message = document.getElementById('confirmationMessage');
        const confirmBtn = document.getElementById('confirmActionBtn');

        if (title) title.textContent = 'Weiterbildung löschen';
        if (message) message.textContent = 'Sind Sie sicher, dass Sie diese Weiterbildung löschen möchten? Alle zugehörigen Dokumente werden ebenfalls gelöscht. Diese Aktion kann nicht rückgängig gemacht werden.';

        if (confirmBtn) {
            confirmBtn.onclick = function() {
                deleteTraining(employeeId, trainingId);
            };
        }

        openModal('confirmationModal');
    }

    // Evaluation deletion confirmation
    function confirmDeleteEvaluation(employeeId, evaluationId) {
        const title = document.getElementById('confirmationTitle');
        const message = document.getElementById('confirmationMessage');
        const confirmBtn = document.getElementById('confirmActionBtn');

        if (title) title.textContent = 'Leistungsbeurteilung löschen';
        if (message) message.textContent = 'Sind Sie sicher, dass Sie diese Leistungsbeurteilung löschen möchten? Alle zugehörigen Dokumente werden ebenfalls gelöscht. Diese Aktion kann nicht rückgängig gemacht werden.';

        if (confirmBtn) {
            confirmBtn.onclick = function() {
                deleteEvaluation(employeeId, evaluationId);
            };
        }

        openModal('confirmationModal');
    }

    // Absence deletion confirmation
    function confirmDeleteAbsence(employeeId, absenceId) {
        const title = document.getElementById('confirmationTitle');
        const message = document.getElementById('confirmationMessage');
        const confirmBtn = document.getElementById('confirmActionBtn');

        if (title) title.textContent = 'Abwesenheit löschen';
        if (message) message.textContent = 'Sind Sie sicher, dass Sie diese Abwesenheit löschen möchten? Alle zugehörigen Dokumente werden ebenfalls gelöscht. Diese Aktion kann nicht rückgängig gemacht werden.';

        if (confirmBtn) {
            confirmBtn.onclick = function() {
                deleteAbsence(employeeId, absenceId);
            };
        }

        openModal('confirmationModal');
    }

    // Development item deletion confirmation
    function confirmDeleteDevelopmentItem(employeeId, itemId) {
        const title = document.getElementById('confirmationTitle');
        const message = document.getElementById('confirmationMessage');
        const confirmBtn = document.getElementById('confirmActionBtn');

        if (title) title.textContent = 'Entwicklungsziel löschen';
        if (message) message.textContent = 'Sind Sie sicher, dass Sie dieses Entwicklungsziel löschen möchten? Diese Aktion kann nicht rückgängig gemacht werden.';

        if (confirmBtn) {
            confirmBtn.onclick = function() {
                deleteDevelopmentItem(employeeId, itemId);
            };
        }

        openModal('confirmationModal');
    }

    // AJAX functions for deleting items
    function deleteDocument(employeeId, documentId, category, relatedId = '') {
        let url = `/employees/${employeeId}/documents/${documentId}?category=${category}`;
        if (relatedId) {
            url += `&relatedId=${relatedId}`;
        }

        fetch(url, {
            method: 'DELETE',
            headers: {
                'Content-Type': 'application/json'
            }
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Fehler beim Löschen des Dokuments');
                }
                return response.json();
            })
            .then(data => {
                closeModal('confirmationModal');
                // Reload the page to show the updated data
                window.location.reload();
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Ein Fehler ist aufgetreten: ' + error.message);
            });
    }

    function deleteTraining(employeeId, trainingId) {
        fetch(`/employees/${employeeId}/trainings/${trainingId}`, {
            method: 'DELETE',
            headers: {
                'Content-Type': 'application/json'
            }
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Fehler beim Löschen der Weiterbildung');
                }
                return response.json();
            })
            .then(data => {
                closeModal('confirmationModal');
                // Reload the page to show the updated data
                window.location.reload();
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Ein Fehler ist aufgetreten: ' + error.message);
            });
    }

    function deleteEvaluation(employeeId, evaluationId) {
        fetch(`/employees/${employeeId}/evaluations/${evaluationId}`, {
            method: 'DELETE',
            headers: {
                'Content-Type': 'application/json'
            }
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Fehler beim Löschen der Leistungsbeurteilung');
                }
                return response.json();
            })
            .then(data => {
                closeModal('confirmationModal');
                // Reload the page to show the updated data
                window.location.reload();
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Ein Fehler ist aufgetreten: ' + error.message);
            });
    }

    function deleteAbsence(employeeId, absenceId) {
        fetch(`/employees/${employeeId}/absences/${absenceId}`, {
            method: 'DELETE',
            headers: {
                'Content-Type': 'application/json'
            }
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Fehler beim Löschen der Abwesenheit');
                }
                return response.json();
            })
            .then(data => {
                closeModal('confirmationModal');
                // Reload the page to show the updated data
                window.location.reload();
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Ein Fehler ist aufgetreten: ' + error.message);
            });
    }

    function deleteDevelopmentItem(employeeId, itemId) {
        fetch(`/employees/${employeeId}/development/${itemId}`, {
            method: 'DELETE',
            headers: {
                'Content-Type': 'application/json'
            }
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Fehler beim Löschen des Entwicklungsziels');
                }
                return response.json();
            })
            .then(data => {
                closeModal('confirmationModal');
                // Reload the page to show the updated data
                window.location.reload();
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Ein Fehler ist aufgetreten: ' + error.message);
            });
    }

    // Function to approve or reject absence
    function approveAbsence(employeeId, absenceId, action) {
        const formData = new FormData();
        formData.append('action', action);

        fetch(`/employees/${employeeId}/absences/${absenceId}/approve`, {
            method: 'POST',
            body: formData
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error(`Fehler beim ${action === 'approve' ? 'Genehmigen' : 'Ablehnen'} der Abwesenheit`);
                }
                return response.json();
            })
            .then(data => {
                // Reload the page to show the updated data
                window.location.reload();
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Ein Fehler ist aufgetreten: ' + error.message);
            });
    }

    // Function to show absence documents in a modal
    function openAbsenceDocumentsModal(absenceId) {
        // This would need a new modal to be implemented
        alert('Funktion noch nicht implementiert');
    }

    // Function to display a specific tab
    function showTab(tabId) {
        // Hide all tab contents
        document.querySelectorAll('.tab-content').forEach(tab => {
            tab.classList.add('hidden');
        });

        // Remove active class from all tab buttons
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.classList.remove('bg-green-100', 'text-green-700');
            btn.classList.add('text-gray-500', 'hover:text-gray-700', 'hover:bg-gray-100');
        });

        // Show the selected tab content
        document.getElementById(tabId + '-tab').classList.remove('hidden');

        // Add active class to the selected tab button
        const activeBtn = document.querySelector(`.tab-btn[data-tab="${tabId}"]`);
        activeBtn.classList.remove('text-gray-500', 'hover:text-gray-700', 'hover:bg-gray-100');
        activeBtn.classList.add('bg-green-100', 'text-green-700');
    }
    
    // Initialize page with the first tab active
    document.addEventListener('DOMContentLoaded', function() {
        showTab('personal');

        // Form submission handlers
        const uploadDocumentForm = document.getElementById('uploadDocumentForm');
        if (uploadDocumentForm) {
            uploadDocumentForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(this);

                fetch(this.action, {
                    method: 'POST',
                    body: formData
                })
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('Fehler beim Hochladen des Dokuments');
                        }
                        return response.json();
                    })
                    .then(data => {
                        closeModal('uploadDocumentModal');
                        // Reload the page to show the updated data
                        window.location.reload();
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        alert('Ein Fehler ist aufgetreten: ' + error.message);
                    });
            });
        }

        const addTrainingForm = document.getElementById('addTrainingForm');
        if (addTrainingForm) {
            addTrainingForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(this);

                fetch(this.action, {
                    method: 'POST',
                    body: formData
                })
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('Fehler beim Hinzufügen der Weiterbildung');
                        }
                        return response.json();
                    })
                    .then(data => {
                        closeModal('addTrainingModal');
                        // Reload the page to show the updated data
                        window.location.reload();
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        alert('Ein Fehler ist aufgetreten: ' + error.message);
                    });
            });
        }

        const addEvaluationForm = document.getElementById('addEvaluationForm');
        if (addEvaluationForm) {
            addEvaluationForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(this);

                fetch(this.action, {
                    method: 'POST',
                    body: formData
                })
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('Fehler beim Hinzufügen der Leistungsbeurteilung');
                        }
                        return response.json();
                    })
                    .then(data => {
                        closeModal('addEvaluationModal');
                        // Reload the page to show the updated data
                        window.location.reload();
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        alert('Ein Fehler ist aufgetreten: ' + error.message);
                    });
            });
        }

        const addAbsenceForm = document.getElementById('addAbsenceForm');
        if (addAbsenceForm) {
            addAbsenceForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(this);

                fetch(this.action, {
                    method: 'POST',
                    body: formData
                })
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('Fehler beim Hinzufügen der Abwesenheit');
                        }
                        return response.json();
                    })
                    .then(data => {
                        closeModal('addAbsenceModal');
                        // Reload the page to show the updated data
                        window.location.reload();
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        alert('Ein Fehler ist aufgetreten: ' + error.message);
                    });
            });
        }

        const addDevelopmentItemForm = document.getElementById('addDevelopmentItemForm');
        if (addDevelopmentItemForm) {
            addDevelopmentItemForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(this);

                fetch(this.action, {
                    method: 'POST',
                    body: formData
                })
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('Fehler beim Hinzufügen des Entwicklungsziels');
                        }
                        return response.json();
                    })
                    .then(data => {
                        closeModal('addDevelopmentItemModal');
                        // Reload the page to show the updated data
                        window.location.reload();
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        alert('Ein Fehler ist aufgetreten: ' + error.message);
                    });
            });
        }
    });
</script>
</body>
</html>